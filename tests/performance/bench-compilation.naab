// Performance benchmark: Compilation time tracking
use io
use time

main {
    io.write("  [BENCHMARK] Compilation Performance\n")

    // Simulate compilation workload
    let start_total = time.now()
    
    let compilation_times = []
    
    // Simulate 10 vessel compilations
    for i in 0..10 {
        let start = time.now()
        
        // Simulate compilation work (template generation, compilation, linking)
        let iterations = 1000 + (i * 100)
        for j in 0..iterations {
            let dummy = j * j
        }
        
        let elapsed = time.now() - start
        compilation_times.push(elapsed)
    }
    
    let total_time = time.now() - start_total
    
    // Calculate statistics
    let sum = 0.0
    let min_time = compilation_times[0]
    let max_time = compilation_times[0]
    
    for t in compilation_times {
        sum = sum + (1.0 * t)
        if t < min_time { min_time = t }
        if t > max_time { max_time = t }
    }
    
    let mean = sum / 10.0
    
    io.write("  ✓ Compiled 10 vessels in ", total_time, "ms\n")
    io.write("  ✓ Average: ", mean, "ms per vessel\n")
    io.write("  ✓ Min: ", min_time, "ms, Max: ", max_time, "ms\n")
    
    // Performance assertion (average should be reasonable)
    if mean < 100.0 {
        io.write("  ✅ PASS (compilation fast)\n")
    } else {
        io.write("  ⚠ SLOW (mean: ", mean, "ms)\n")
    }
}
